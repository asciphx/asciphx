# Asciphx
> ä½¿ç”¨ Babel + typeORM + Mysql + Fastify + gulpæ„å»ºï¼Œä¸€ä¸ªç±»ä¼¼äºJavaçš„SpringBootæ¶æ„ï¼Œä½†åŒæ—¶å…·æœ‰.net Coreçš„æ€§èƒ½ã€‚
> æ’ä»¶nodemonä¹Ÿèƒ½é…åˆå…¶ä»–ååŒå·¥ä½œï¼Œè®©å¼€å‘æ›´é›†ä¸­ï¼Œæ›´ä¸“æ³¨äºç¼–å†™ä»£ç ã€‚

## ä¸»è¦ç‰¹æ€§
- **Babel**ä½¿ç”¨ä¸‹ä¸€ä»£jsè¯­æ³•ç³–ï¼Œå ªç§°å²ä¸Šæœ€ç®€æ´ï¼Œä»£ç å¯è¯»æ€§æœ€æ£’
- æ”¯æŒ **TypeORM**ï¼Œæœ€å¥½çš„ Typescript ORM æ¡†æ¶ï¼Œè½»æ¾ç¼–å†™ DAO å±‚çš„å„ç±»é€»è¾‘
- **Fastify**åŠ æŒä¸‹ï¼Œæ€§èƒ½è¿›å…¥ä¸–ç•Œå‰äº”ï¼Œå¤æ‚åº¦ä¹Ÿè¿›ä¸€æ­¥æå‡ï¼Œå¹¶èƒ½å®Œæˆæœ€å¥½çš„åŠŸèƒ½
- **gulp**å ªç§°è‡ªåŠ¨åŒ–ä¹‹ç‹ï¼Œæœ‰äº†gulpæ‰“åŒ…ä½¿å¾—proç¯å¢ƒçš„ä»£ç æ›´å¥å£®ï¼Œä½†ä½“ç§¯å´æ›´åŠ å°
- **nodemon**å¯ä»¥å¸®åŠ©åœ¨devç¯å¢ƒä¸‹ï¼Œæ›´å‹å¥½çš„å¼€å‘ï¼Œä½†ä¹Ÿéœ€è¦å…ˆ`npm run watch:pro`
- å„ç§æ’ä»¶è”æ‰‹ï¼Œå…è®¸éƒ¨åˆ†ä½¿ç”¨é™æ€ç±»å‹ä¿®é¥°ã€ç±»å‹æ¨æ–­ï¼Œä¸ºåç«¯å¼€å‘å’Œç»´æŠ¤æä¾›æ”¯æŒ
- æ¨¡å—åŒ–å¼€å‘ï¼Œè®©åº”ç”¨ç¨‹åºæ›´å®¹æ˜“åˆ†å±‚ï¼Œæä¾›äº†æ˜“äºä½¿ç”¨çš„æ¨¡å—åŒ–ç®¡ç†æœºåˆ¶
- æœ€ä½è°ƒç¼–å†™ AOP ä»£ç ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå´è½»æ¾å®ç°æ—¥å¿—ã€æ‹¦æˆªå™¨ã€è¿‡æ»¤å™¨ç­‰åŠŸèƒ½
- æœ€å¿«ï¼Œæœ€è¿…é€Ÿï¼Œæœ€çŒ›çƒˆæ„å»º MVCã€APIã€websocketã€å¾®æœåŠ¡ç­‰ç³»ç»Ÿ
- ......

## Demo
- [KOA](https://github.com/asciphx/asciphx/tree/master/sample/koa-babel) KOAæ¡†æ¶ï¼Œå†™èµ·æ¥ç¨å¾®éº»çƒ¦ä½†é€Ÿåº¦å…¼å…·çš„æ¡†æ¶ğŸ
- [express](https://github.com/asciphx/asciphx/tree/master/sample/express-babel) expressæ¶æ„ï¼Œå†™èµ·æ¥æ–¹ä¾¿ï¼Œåªæ˜¯æ€§èƒ½ç¨å¾®ç•¥ä½ç‚¹ğŸ

## ç‰¹å¾
- [x] Classç±»è£…é¥°å™¨é»˜è®¤å€¼ä¸º "/"+å®ä½“ç±»å ,å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰
- [x] è‡ªåŠ¨æ‰«æcontrollerç›®å½•ï¼Œå¹¶ä¸”é…ç½®Routesè·¯ç”±
- [x] è‡ªåŠ¨æ‰«æentityï¼Œå¹¶ä¸”ç”Ÿæˆschema.properties
- [x] è‡ªåŠ¨ç”Ÿæˆé…ç½®è·¯ç”±æ–‡ä»¶ä»¥ä¾¿æŸ¥é˜…ï¼Œåœ¨dist/routesç›®å½•ä¸‹ï¼Œä¹Ÿå¯åˆ é™¤ï¼Œæˆ–è€…å»src/config.jsä¸‹æ›´æ”¹printRouteä¸ºfalse
- [x] babelç”¨ä¸‹ä¸€ä»£jsè¯­æ³•ç³–å¯ä»¥å·¨å¹…é™ä½ä»£ç è¡Œæ•°ï¼Œè¿˜å¯ä»¥å…¼å®¹tsç±»å‹æ£€æŸ¥ï¼Œè€Œè§£å†³tsä»£ç è¿‡äºæ²‰é•¿çš„é—®é¢˜
- [x] æœ‰å‡ ä¹ç›¸è¿‘äºC#:.net coreæ¶æ„çš„é€Ÿåº¦ï¼Œè¿˜æœ‰java:SpringBootæ¡†æ¶çš„å¯ç»´æŠ¤æ€§ï¼Œå‰ææ˜¯å…³é—­æ—¥å¿—æ‰“å°ï¼Œè¿˜æœ‰å°½å¯èƒ½å°‘ç”¨æ’ä»¶
- [x] å¦‚ä¸é‡‡ç”¨typeORMåº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Sequelizeï¼Œå¹¶é‡å†™entityç±»ï¼Œé‡‡ç”¨index_old.jsé‡Œé¢çš„æ–¹å¼æŸ¥è¯¢æ•°æ®åº“è·å–å®ä½“ç±»æˆ–è€…è‡ªè¡ŒæŸ¥æ‰¾æ˜ å°„çš„æ–¹æ³•
- [x] ç²¾ç¡®åˆ°å­—æ¯å¤§å°å†™çš„è·¯ç”±ï¼Œå¤§å°å†™ä¸åŒ¹é…ä¹Ÿä¼šå¯¼è‡´æ— æ³•è¿æ¥ï¼Œé—æ†¾çš„æ˜¯å‡ ä¹æ‰€æœ‰ç½‘ç«™è·¯ç”±è½¬æˆäº†å°å†™ï¼Œå®æˆ˜åœºæ™¯ä¼¼ä¹è¾ƒå°‘
- [x] è£…é¥°å™¨ä¸­ï¼Œè‹¥æ˜¯è¿”å›çš„éObjectç±»å‹ï¼Œè¿˜éœ€åœ¨methodè£…é¥°å™¨ç¬¬ä¸€ä¸ªå‚æ•°æ”¹æ•°å­—æ¥åˆ¤æ–­ï¼Œåœ¨src/config.jsçš„jsonSchemaä¸­ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå€¼ä¼šæ˜¯url
- [x] è¿˜æœªä½¿ç”¨schemaä¸­çš„querystring,headersï¼›å¦‚éœ€ä½¿ç”¨ï¼Œåªèƒ½ä¿®æ”¹src/utils/decorator.jsé‡Œé¢çš„æ–¹æ³•ï¼Œè‡ªè¡Œæƒ³åŠæ³•æ·»åŠ ã€‚ä½¿ç”¨åä¼°è®¡æ€§èƒ½ä¼šæå‡5%


## ç›®å½•ç»“æ„
1. dist:`babelç¼–è¯‘åçš„æ–‡ä»¶`
2. src:`åç«¯æ–‡ä»¶å…¥å£`
3. src/controller:`æ§åˆ¶å±‚`
4. src/entity:`å®ä½“å±‚`
5. src/service:`æœåŠ¡å±‚`
6. src/migration:`è¿ç§»å±‚`
7. src/utils:`å·¥å…·å±‚`
8. views:`åå°ejsæ¨¡æ¿æ¸²æŸ“æ–‡ä»¶å¤¹`
9. windows-lib:`windowsçš„linuxæŒ‡ä»¤åŒ…ï¼ˆæ”¾ç³»ç»Ÿpathå˜é‡ä¸­æˆ–nodejså®‰è£…ç›®å½•ä¸‹ï¼‰`
10. dist/routes:`è¾“å‡ºæŸ¥çœ‹çš„è·¯ç”±æ–‡ä»¶ï¼Œæ¯ä¸ªcontrollerä¼šåˆ›å»ºä¸€ä¸ª`

## æ’ä»¶æ”¯æŒ
1. such as:obj::funcã€?.ã€??ã€|>ã€#ã€||=ã€&&=ã€@decoratorsã€function*ã€do{...}
2. support strip-types. eg:function foo(one: any, two: number, three?): string {}
3. åœ¨fastifyçš„point-of-viewç»„ä»¶èƒ½è®©é™æ€è·¯ç”±å¯é‡‡ç”¨.htmlæ¥é¿å…ä¸æ™®é€šè·¯ç”±å‘ç”Ÿçš„å†²çª

## éœ€è¦æ›´æ”¹çš„é…ç½®
1. vsCode settings:
```json
    "emmet.includeLanguages": {
        "vue-html": "html",
        "javascript": "javascriptreact"
    },
    "javascript.validate.enable": false,
```
2. è¯·å‹¿å°†awaitè¯­æ³•å†…ç”¨æ’ä»¶æ”¯æŒçš„æ“ä½œç¬¦ï¼Œå¯èƒ½ä¼šå¯¼è‡´awaitå¤±æ•ˆ;
è§£å†³æ–¹æ¡ˆï¼Œawait(...)ã€‚ä½¿ç”¨æ‹¬å·åŒ…è£¹ï¼Œé˜»æ­¢babelç¿»è¯‘å¤±è´¥ã€‚
3. éœ€è¦npm i -g eslint@7.6.0 ä»¥ä¾¿æ”¯æŒå†…éƒ¨çš„è¯­æ³•æ£€æŸ¥ã€‚
4. ormconfig.jsonä¸­çš„synchronizeï¼Œè®¾ç½®ä¸ºtrueåˆ™è‡ªåŠ¨åŒæ­¥å®ä½“ç±»åˆ°æ•°æ®åº“ã€‚

## æ³¨æ„
1. **å¦‚ä½•è¿è¡Œ**ï¼š
çœ‹çœ‹æœ‰æ²¡æœ‰å…¨å±€å®‰è£…eslint,å¦‚æœæ²¡æœ‰ä¹Ÿå¯ä»¥å®‰è£…åœ¨æœ¬åœ°npm i --save-dev eslintã€‚
è¯·å…ˆçœ‹é…ç½®æ–‡ä»¶åœ¨ormconfig.jsï¼Œæ‰¾åˆ°mysqléœ€è¦çš„æ•°æ®åº“ï¼Œç™»å½•å¹¶åˆ›å»ºè¯¥æ•°æ®åº“ã€‚

å…ˆå¼€ä¸€ä¸ªç»ˆç«¯`npm run watch`,ï¼ˆä»¥ä¾¿çœ‹åˆ°babelç¼–è¯‘åçš„ä»£ç ï¼‰æˆ–è€…`npm run watch:pro`ï¼Œ(gulpç¼–è¯‘åä»£ç ä¼šè¢«å‹ç¼©ï¼Œä½†æ˜¯æ€§èƒ½ä¼šæå‡)
å†å¼€ä¸€ä¸ªæ–°ç»ˆç«¯`npm run dev`ç”¨äºè¿è¡Œé¡¹ç›®çš„å¼€å‘ç¯å¢ƒã€‚

or
åªå¼€ä¸€ä¸ªç»ˆç«¯ï¼Œæ¯æ¬¡éƒ½ç”¨`npm run start:build`ï¼Œä½†è¿™å°±ä¸æ˜¯å®æ—¶ç¼–è¯‘äº†,è€Œä¸”å¯èƒ½ä¼šæ…¢ã€‚
```json
    "build": "rm -rf dist && babel src -d dist --no-comments",
    "build:pro": "rm -rf dist && gulp build",
    "old": "node dist/index_old.js",
    "start": "node dist/index.js",
    "start:build": "babel src --out-dir dist --no-comments && node dist/index.js",
    "watch": "rm -rf dist && babel src --watch --out-dir dist --no-comments",
    "watch:pro": "rm -rf dist && gulp build && gulp watch",
    "dev": "nodemon"
```
2. **ä¿æŒå‘½åè§„èŒƒ**ï¼š
controllerå±‚ä¸‹çš„è¯·å°½é‡ä¿æŒå¤§å°é©¼å³°å‘½åè§„èŒƒ
3. **æš‚æ—¶æ²¡æœ‰æŸ¥è¯¢éªŒè¯**ï¼š
åœ¨schemaä¸­ç¼ºå°‘çš„æ˜¯querystring,headers,ä½†æ˜¯ä¸ä¼šå½±å“ä½¿ç”¨,å¯ä»¥è‡ªè¡Œæ·»åŠ 
schemaéªŒè¯ç›®å‰é‡‡ç”¨src/util/toolä¸‹çš„ctxæ–¹æ³•ï¼Œå¾—é…åˆ@Ctxä¸€èµ·ä½¿ç”¨ï¼Œæ‰è¡Œ
Fastifyä¹Ÿæ˜¯ä½œä¸ºä¸–ç•Œæ’åå‰äº”çš„æœåŠ¡ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œå‰äº”è¿˜æœ‰irisï¼Œæœ‰.net core
è™½ç„¶Fastfifyå¹¶ä¸æ˜¯æœ€å¿«çš„ï¼Œä½†æ˜¯è®ºæ‰©å±•å’Œå¯ç»´æŠ¤æ€§ï¼Œä»£ç å¯è¯»æ€§éƒ½éå¸¸å¼º
KOAå’Œexpressç‰ˆæœ¬çš„Babelæ¡†æ¶å·²ç»å‡ºå“ï¼Œåœ¨sampleç›®å½•
4. **è¯·èµåŠ©æœ¬é¡¹ç›®**ï¼š
å¦‚ä½ è§‰æœ‰æ”¶è·ï¼Œè¯·ç»™æˆ‘æ‰“èµ

![å¾®ä¿¡æ‰“èµ](http://www.91huanwei.com/1.jpg)
![æ”¯ä»˜å®æ‰“èµ](http://www.91huanwei.com/0.jpg)
